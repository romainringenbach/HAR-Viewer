function HarViewer(i,t){var e=this;if(this.id=i,this.entriesSummaries=new Array,this.showedEntries=new Array,this.indicators=new Array,t)for(var s=0;s<additionnalSeparators.length;s++)this.indicators.push(addtionnalIndicator[s]);this.form=null,this.search=null,this.content=null,this.left=null,this.right=null,this.table=null,this.listFilters=["Name","URL","Method","Status","Type","Size","Time"],this.responseHeader=["Server","Date","Content-Type","Last-Modified","Transfer-Encoding","Connection","Vary","Content-Encoding"],this.requestHeader=["Host","Accept","Referer","Accept-Encoding","Accept-Language","User-Agent","Cache-Control"],this.entryTimings=["blocked","dns","connect","send","wait","receive"],this.filters=null,this.time=null,this.firstDate=null,this.waterfall=null,this.timesTh=null,this.details=null,this.request=null,this.requestList=null,this.response=null,this.responseList=null,this.timings=null,this.timingsList=null,this.globalInformationBar=null,this.buttons=null,this.reload=null,this.displayWaterFall=null,this.displayDetails=null,this.firstDetails=!0,this.currentEntryFocused=0,this.colorPairRow="#FFFFFF",this.colorUnpairRow="#F2F2F2",this.colorHighlightRow="#FFA07A",this.colorIndicatorOnload="#DC143C",this.loadHar=function(i){this.entriesSummaries=new Array,this.har=i,this.entries=parseHar(i),this.initEntriesSummaries(),this.initFrontEnd()},this.initEntriesSummaries=function(){this.time=0;for(var i=0;i<this.entries.length;i++){for(var t=this.entries[i].request.url,e=0,s=!1,r=t.length-1;r>=0&&!s;r--)"/"==t[r]&&(e=r,s=!0);var a=t.substring(e),n=this.entries[i].response.content.mimeType,l=0;s=!1;for(var r=0;r<n.length&&!s;r++)";"==n[r]&&(l=r,s=!0);var o=n.substring(0,l);s||(o=n),entry={Name:a,URL:this.entries[i].request.url,Method:this.entries[i].request.method,Status:this.entries[i].response.status,Type:o,Size:this.entries[i].response.content.size,Time:this.entries[i].time,Timings:this.entries[i].timings,date:new Date(this.entries[i].startedDateTime).valueOf()},delete entry.Timings.comment,delete entry.Timings.ssl,this.showedEntries.push(entry),this.entriesSummaries.push(entry)}},this.initFrontEnd=function(){this.initForm(),this.initLeftRight(),this.initGlobalInformationsBar()},this.initButtonReload=function(){this.reload=document.createElement("img"),this.reload.id="HarViewerReload",this.reload.src="reload.png",$("#"+this.buttons.id).append(this.reload),$("#"+this.reload.id).outerHeight($("#"+this.search.id).outerHeight()),$("#"+this.reload.id).outerWidth($("#"+this.search.id).outerHeight()),$("#"+this.reload.id).click(function(i){e.showedEntries=new Array;for(var t=0;t<e.entriesSummaries.length;t++)e.showedEntries.push(e.entriesSummaries[t]);e.initTime(),e.initTable(),e.initWaterFallView(),e.hideDetails(),e.showWaterFall()})},this.initButtonDisplayWaterFall=function(){this.displayWaterFall=document.createElement("img"),this.displayWaterFall.id="HarViewerDisplayWaterFall",this.displayWaterFall.src="displayWaterFall.png",$("#"+this.buttons.id).append(this.displayWaterFall),$("#"+this.displayWaterFall.id).outerHeight($("#"+this.search.id).outerHeight()),$("#"+this.displayWaterFall.id).outerWidth($("#"+this.search.id).outerHeight()),$("#"+this.displayWaterFall.id).click(function(i){e.hideDetails(),e.showWaterFall()})},this.initButtonDisplayDetails=function(){this.displayDetails=document.createElement("img"),this.displayDetails.id="HarViewerDisplayDetails",this.displayDetails.src="displayDetails.png",$("#"+this.buttons.id).append(this.displayDetails),$("#"+this.displayDetails.id).outerHeight($("#"+this.search.id).outerHeight()),$("#"+this.displayDetails.id).outerWidth($("#"+this.search.id).outerHeight()),$("#"+this.displayDetails.id).click(function(i){e.hideWaterFall(),e.showDetails()})},this.initButtons=function(){this.buttons=document.createElement("div"),this.buttons.id="HarViewerActions",$("#"+this.form.id).append(this.buttons),this.initButtonReload(),this.initButtonDisplayWaterFall(),this.initButtonDisplayDetails();var i=$("#"+this.form.id).position(),t=$("#"+this.reload.id).outerWidth(!0)+$("#"+this.displayWaterFall.id).outerWidth(!0)+$("#"+this.displayDetails.id).outerWidth(!0);$("#"+this.buttons.id).width(t);var e=i.left+$("#"+this.form.id).width()-$("#"+this.buttons.id).outerWidth(!0),s=i.top+$("#"+this.form.id).css("padding-top")+$("#"+this.form.id).css("margin-top");$("#"+this.buttons.id).css("position","absolute"),$("#"+this.buttons.id).css("top",s),$("#"+this.buttons.id).css("left",e)},this.initSearchBar=function(){this.search=document.createElement("input"),this.search.type="text",this.search.value="Search...",this.search.id="HarViewerSearch",$("#"+this.form.id).append(this.search),$("#"+this.search.id).keypress(this.onSearch),$("#"+this.search.id).click(this.onClickOnSearch),$("#"+this.search.id).focusout(this.onFocusOutSearch),$("#"+this.search.id).css("border-radius",$("#"+this.search.id).outerHeight()/2),$("#"+this.search.id).css("border-color","#000000"),$("#"+this.search.id).css("border-width",0),$("#"+this.search.id).css("border-style","solid")},this.initForm=function(){this.form=document.createElement("form"),this.form.id="HarViewerForm",$("#"+this.form.id).length&&$("#"+this.form.id).remove(),$("#"+this.id).append(this.form),this.initSearchBar(),this.initButtons(),$("#"+this.form.id).outerWidth($("#"+this.id).outerWidth()),$("#"+this.form.id).height($("#"+this.search.id).outerHeight())},this.initLeft=function(){this.left=document.createElement("div"),this.left.id="HarViewerLeftPanel",$("#"+this.content.id).append(this.left),$("#"+this.left.id).css("float","left"),this.initTable()},this.initRight=function(){this.right=document.createElement("div"),this.right.id="HarViewerRightPanel",$("#"+this.content.id).append(this.right),$("#"+this.right.id).css("float","right"),this.initTime(),this.initWaterFallView(),this.showWaterFall(),this.currentEntryFocused=0,this.initDetails(),this.hideDetails(),$("#"+this.right.id).outerWidth($("#"+this.left.id).outerWidth(!0))},this.initLeftRight=function(){this.content=document.createElement("div"),this.content.id="HarViewerContent",$("#"+this.content.id).length&&$("#"+this.content.id).remove(),$("#"+this.id).append(this.content),this.initLeft(),$("#"+this.content.id).height($("#"+this.left.id).outerHeight(!0)),$("#"+this.content.id).outerWidth($("#"+this.form.id).outerWidth(!0)),this.initRight()},this.initTable=function(){this.table=document.createElement("div"),this.table.id="HarViewerTable",$("#"+this.table.id).length&&$("#"+this.table.id).remove(),$("#"+this.left.id).append(this.table),this.initFilterBar()},this.initFilterBar=function(){this.filters=document.createElement("div"),this.filters.id="HarViewerFilters",$("#"+this.table.id).append(this.filters);for(var i=0;i<this.listFilters.length;i++){var t=document.createElement("div");t.id="HarViewerFilters_"+i,t.innerHTML=this.listFilters[i],$("#"+this.filters.id).append(t),$("#"+t.id).addClass(t.id),$("#"+t.id).addClass(this.filters.id+""+this.listFilters[i]),$("#"+t.id).click(this.onFilter)}this.initEntriesRows()},this.initTime=function(){for(var i=this.showedEntries[0].date,t=0,e=0,s=0;s<this.showedEntries.length;s++)this.showedEntries[s].date<i&&(i=this.showedEntries[s].date),this.showedEntries[s].date>=t&&(e=this.showedEntries[s].date==t?Math.max(this.showedEntries[s].Time,e):this.showedEntries[s].Time,t=this.showedEntries[s].date);this.time=t-i+e,this.firstDate=i},this.initEntriesRows=function(){for(var i=0;i<this.showedEntries.length;i++){var t=this.showedEntries[i],e=document.createElement("div");e.id="HarViewerRow_"+i,$("#"+this.table.id).append(e),$("#"+e.id).addClass("HarViewerTableRow"),i%2==0?$("#"+e.id).css("background-color",this.colorPairRow):$("#"+e.id).css("background-color",this.colorUnpairRow);for(var s=0;s<this.listFilters.length;s++){this.listFilters[s];var r=document.createElement("div");r.id="HarViewerRow_"+this.listFilters[s]+"_"+i,"URL"==this.listFilters[s]?r.innerHTML='<a href="'+t[this.listFilters[s]]+'" title="'+t[this.listFilters[s]]+'" class="tooltip" >'+t[this.listFilters[s]]+"</a>":r.innerHTML='<p title="'+t[this.listFilters[s]]+'" class="tooltip">'+t[this.listFilters[s]]+"</p>",$("#"+e.id).append(r),"URL"!=this.listFilters[s]&&$("#"+r.id).click(this.onEntry),$("#"+r.id).addClass("HarViewerFilters"+this.listFilters[s])}}},this.initWaterFallView=function(){this.waterfall=document.createElement("div"),this.waterfall.id="HarViewerWaterFall",$("#"+this.waterfall.id).length&&$("#"+this.waterfall.id).remove(),$("#"+this.right.id).append(this.waterfall),this.initWaterFallHeader(),this.showWaterFall(),this.initIndicators()},this.initWaterFallHeader=function(){this.timesTh=document.createElement("div"),this.timesTh.id="HarViewerTimeTh",$("#"+this.waterfall.id).append(this.timesTh),$("#HarViewerTimeTh").height($("#"+this.filters.id).height());for(var i=Math.floor(this.time/10),t=0;10>t;t++){var e=document.createElement("div");e.id="HarViewerTimeTh_"+t,e.innerHTML=i*t+"ms",$("#HarViewerTimeTh").append(e),$("#"+e.id).addClass("HarViewerTimeHeader")}this.initWaterFallRows()},this.initWaterFallRows=function(){for(var i=0,t=0;t<this.showedEntries.length;t++){var e=this.showedEntries[t],s=document.createElement("div");s.id="HarViewerWaterFallRow_"+t,$("#"+this.waterfall.id).append(s);var r=$("#"+this.waterfall.id).width();$("#HarViewerWaterFallRow_"+t).addClass("HarViewerWaterFallRow"),i=$("#"+this.waterfall.id).width()*(e.date-this.firstDate)/this.time,$("#HarViewerWaterFallRow_"+t).css("padding-left",i),$("#HarViewerWaterFallRow_"+t).outerHeight($("#HarViewerRow_0").outerHeight()),t%2==0?$("#HarViewerWaterFallRow_"+t).css("background-color",this.colorPairRow):$("#HarViewerWaterFallRow_"+t).css("background-color",this.colorUnpairRow),allTimingsBlock=document.createElement("div"),allTimingsBlock.id="HarViewerWaterFallRowAllTiming_"+t,allTimingsBlock.title="";for(timing in e.Timings)value=e.Timings[timing],allTimingsBlock.title=allTimingsBlock.title+timing+" : "+value+"\n";$("#HarViewerWaterFallRow_"+t).append(allTimingsBlock),$("#HarViewerWaterFallRowAllTiming_"+t).addClass("HarViewerAllTimingBlock"),$("#HarViewerWaterFallRowAllTiming_"+t).addClass("tooltip");for(timing in e.Timings){value=e.Timings[timing];var a=document.createElement("div");a.id="HarViewerWaterFallRow_"+timing+"_"+t,a.alt=value,$("#HarViewerWaterFallRowAllTiming_"+t).append(a);var n=timing.substring(0,1).toUpperCase()+timing.substring(1);$("#HarViewerWaterFallRow_"+timing+"_"+t).addClass("HarViewerTiming"+n),$("#HarViewerWaterFallRow_"+timing+"_"+t).addClass("HarViewerTimingBlock");var l=r*value/this.time;$("#HarViewerWaterFallRow_"+timing+"_"+t).outerWidth(l)}}},this.initIndicators=function(){var i=this.har.log.pages[0].pageTimings.onLoad;this.indicators.push({name:"onload",value:i,color:this.colorIndicatorOnload});for(var t=0;t<this.indicators.length;t++){var e=this.indicators[t].name,s=this.indicators[t].value,r=this.indicators[t].color,a=$("#"+this.waterfall.id).width()*(s/this.time),n=$("#"+this.right.id).position(),l=a+n.left,o=n.top+$("#HarViewerTimeTh").outerHeight(!0),h=document.createElement("div");h.id="HarViewerSeparator"+e,h.title="Name : "+e+", Value : "+s,$("#"+this.waterfall.id).append(h),$("#"+h.id).width(0),$("#"+h.id).height($("#"+this.waterfall.id).height()-$("#HarViewerTimeTh").outerHeight(!0)),$("#"+h.id).css("position","absolute"),$("#"+h.id).css("z-index",6),$("#"+h.id).css("float","left"),$("#"+h.id).css("top",o),$("#"+h.id).css("left",l),$("#"+h.id).css("border-right","solid"),$("#"+h.id).css("border-width","2px"),$("#"+h.id).css("border-color",r)}},this.initRequest=function(){this.request=document.createElement("div"),this.request.id="HarViewerDetailsRequest",this.request.innerHTML="<p>Request</p>",$("#"+this.details.id).append(this.request),this.requestList=document.createElement("ul"),this.requestList.id="HarViewerDetailsRequestList",$("#HarViewerDetailsRequest").append(this.requestList);var i=(this.entriesSummaries[this.currentEntryFocused],this.entries[this.currentEntryFocused]),t={};for(s=0;s<i.request.headers.length;s++)for(j=0;j<this.requestHeader.length;j++)i.request.headers[s].name==this.requestHeader[j]&&(t[this.requestHeader[j]]=i.request.headers[s].value);for(s=0;s<this.requestHeader.length;s++){var e=document.createElement("li");e.innerHTML="<li><p><strong>"+this.requestHeader[s]+"</strong> : "+t[this.requestHeader[s]]+"</p>",$("#HarViewerDetailsRequestList").append(e)}},this.initResponse=function(){this.response=document.createElement("div"),this.response.id="HarViewerDetailsResponse",this.response.innerHTML="<p>Response</p>",$("#"+this.details.id).append(this.response),this.responseList=document.createElement("ul"),this.responseList.id="HarViewerDetailsResponseList",$("#HarViewerDetailsResponse").append(this.responseList);var i=(this.entriesSummaries[this.currentEntryFocused],this.entries[this.currentEntryFocused]),t={};for(s=0;s<i.response.headers.length;s++)for(j=0;j<this.responseHeader.length;j++)i.response.headers[s].name==this.responseHeader[j]&&(t[this.responseHeader[j]]=i.response.headers[s].value);for(s=0;s<this.responseHeader.length;s++){var e=document.createElement("li");e.innerHTML="<li><p><strong>"+this.responseHeader[s]+"</strong> : "+t[this.responseHeader[s]]+"</p>",$("#HarViewerDetailsResponseList").append(e)}},this.initTimings=function(){this.timings=document.createElement("div"),this.timings.id="HarViewerDetailsTimings",this.timings.innerHTML="<p>Timings</p>",$("#"+this.details.id).append(this.timings),this.timingsList=document.createElement("ul"),this.timingsList.id="HarViewerDetailsTimingsList",$("#HarViewerDetailsTimings").append(this.timingsList);var i=this.entriesSummaries[this.currentEntryFocused],t=i.Timings;for(s=0;s<this.entryTimings.length;s++){var e=document.createElement("li");e.innerHTML="<li><p><strong>"+this.entryTimings[s]+"</strong> : "+t[this.entryTimings[s]]+"</p>",$("#HarViewerDetailsTimingsList").append(e)}},this.initDetails=function(){this.details=document.createElement("div"),this.details.id="HarViewerDetails",$("#"+this.details.id).length&&$("#"+this.details.id).remove(),$("#"+this.right.id).append(this.details),this.initRequest(),this.initResponse(),this.initTimings(),$("#"+this.details.id).outerHeight($("#"+this.table.id).outerHeight(!0))},this.initGlobalInformationsBar=function(){this.globalInformationsBar=document.createElement("div"),this.globalInformationsBar.id="HarViewerGlobalInformationsBar",$("#"+this.globalInformationsBar.id).length&&$("#"+this.globalInformationsBar.id).remove();for(var i=0,t=0;t<this.entriesSummaries.length;t++)i+=this.entriesSummaries[t].Size;this.globalInformationsBar.innerHTML="<p><strong>Requests : </strong>"+this.entriesSummaries.length+"; <strong>Weight : </strong>"+i+"</p>",$("#"+this.id).append(this.globalInformationsBar)},this.showDetails=function(){var i=this.currentEntryFocused;$("#HarViewerWaterFallRow_"+i).css("background-color",this.colorHighlightRow),$("#HarViewerRow_"+i).css("background-color",this.colorHighlightRow),$("#"+this.details.id).css("display","block")},this.showWaterFall=function(){$("#"+this.waterfall.id).css("display","block")},this.hideDetails=function(){var i=this.currentEntryFocused;i%2==0?($("#HarViewerWaterFallRow_"+i).css("background-color",this.colorPairRow),$("#HarViewerRow_"+i).css("background-color",this.colorPairRow)):($("#HarViewerWaterFallRow_"+i).css("background-color",this.colorUnpairRow),$("#HarViewerRow_"+i).css("background-color",this.colorUnpairRow)),e.currentEntryFocused%2==0?($("#HarViewerWaterFallRow_"+e.currentEntryFocused).css("background-color",this.colorPairRow),$("#HarViewerRow_"+e.currentEntryFocused).css("background-color",this.colorPairRow)):($("#HarViewerWaterFallRow_"+e.currentEntryFocused).css("background-color",this.colorUnpairRow),$("#HarViewerRow_"+e.currentEntryFocused).css("background-color",this.colorUnpairRow)),$("#"+this.details.id).css("display","none")},this.hideWaterFall=function(){$("#"+this.waterfall.id).css("display","none")},this.onClickOnSearch=function(i){$("#"+e.search.id).prop("value","")},this.onFocusOutSearch=function(i){$("#"+e.search.id).prop("value","Search...")},this.onSearch=function(i){var t=$("#"+e.search.id).prop("value");e.showedEntries=new Array;for(var s=0;s<e.entriesSummaries.length;s++){for(var r=e.entriesSummaries[s],a=!1,n=0;n<e.listFilters.length&&!a;n++)r[e.listFilters[n]].toString().includes(t)&&(a=!0);a&&e.showedEntries.push(r)}e.initTime(),e.initTable(),e.initWaterFallView()},this.onEntry=function(i){for(var t=i.currentTarget.id,s=0,r=!1,a=t.length-1;a>=0&&!r;a--)"_"==t[a]&&(s=a,r=!0);var n=t.substring(s+1),l=n.valueOf();l!=e.currentEntryFocused||e.firstDetails?e.firstDetails?(e.firstDetails=!1,e.initDetails(),e.hideWaterFall(),e.showDetails()):(e.currentEntryFocused%2==0?($("#HarViewerWaterFallRow_"+e.currentEntryFocused).css("background-color","#FFFFFF"),$("#HarViewerRow_"+e.currentEntryFocused).css("background-color","#FFFFFF")):($("#HarViewerWaterFallRow_"+e.currentEntryFocused).css("background-color","#F2F2F2"),$("#HarViewerRow_"+e.currentEntryFocused).css("background-color","#F2F2F2")),e.currentEntryFocused=l,e.initDetails(),e.hideWaterFall(),e.showDetails()):(e.hideDetails(),e.showWaterFall(),e.currentEntryFocused=null,l%2==0?($("#HarViewerWaterFallRow_"+l).css("background-color","#FFFFFF"),$("#HarViewerRow_"+l).css("background-color","#FFFFFF")):($("#HarViewerWaterFallRow_"+l).css("background-color","#F2F2F2"),$("#HarViewerRow_"+l).css("background-color","#F2F2F2")))},this.onFilter=function(i){for(var t=i.currentTarget.id,s=0,r=!1,a=t.length-1;a>=0&&!r;a--)"_"==t[a]&&(s=a,r=!0);var n=t.substring(s+1);e.showedEntries.sort(function(i,t){return e.compareTwoEntries(i,t,e.listFilters[n])}),e.initTime(),e.initTable(),e.initWaterFallView()},this.compareTwoEntries=function(i,t,e){var s=0;return i[e]>t[e]?s=1:i[e]<t[e]&&(s=-1),s},$(window).resize(function(){e.initFrontEnd()})}function parseHar(i){var t=i.log.entries;return t.sort(compareEntries),t}function compareEntries(i,t){return dateA=new Date(i.startedDateTime),dateB=new Date(t.startedDateTime),dateA.valueOf()-dateB.valueOf()}
